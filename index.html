<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ö–∞—Ä—Ç–∞ —Ä–∞–Ω–µ–Ω–∏–π</title>

  <!-- jsPDF -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <style>
    body{ margin:0; font-family: Arial, sans-serif; background:#fff; color:#111; }
    .title{ padding:10px; text-align:center; font-weight:700; font-size:18px; }
    .topStatus{ padding:10px 12px; font-size:14px; background:#dff7df; border-bottom:1px solid #a9d9a9; color:#333; white-space:pre-wrap; }
    .topStatus.bad{ background:#ffe1e1; border-bottom:1px solid #f0a6a6; color:#8a1f1f; }

    .tabs{ display:flex; }
    .tab{ width:100%; padding:14px; font-size:17px; border:none; background:#222; color:#fff; touch-action: manipulation; }
    .tab.active{ background:#0b6623; }
    .tab:active{ opacity:.85; }

    .wrap{ position:relative; width:100%; }
    .map{ width:100%; display:block; user-select:none; -webkit-user-drag:none; }

    #pinsLayer{ position:absolute; inset:0; width:100%; height:100%; pointer-events:none; z-index:10; }

    .pin{
      position:absolute; transform: translate(-50%,-50%);
      min-width:26px; height:26px; padding:0 6px; border-radius:999px;
      color:#fff; font-weight:800; font-size:13px; display:flex; align-items:center; justify-content:center;
      z-index:20; border:2px solid rgba(255,255,255,0.95);
      box-shadow:0 1px 6px rgba(0,0,0,0.18);
      pointer-events:auto; cursor:pointer; user-select:none; touch-action: manipulation;
      -webkit-tap-highlight-color: rgba(0,0,0,0);
    }

    .pin.front{ background: rgba(0,120,255,0.90); }
    .pin.back{  background: rgba(255,0,0,0.90); }

    .pin.selected{
      outline:3px solid rgba(255,255,255,0.95);
      transform: translate(-50%,-50%) scale(1.08);
      filter:none;
    }

    .pin.front.selected,
    .pin.back.selected{
      background: rgba(255, 200, 0, 0.98);
      color:#111;
      border-color: rgba(0,0,0,0.15);
    }

    .panel{ padding:12px; border-top:1px solid #ddd; background:#fafafa; }
    label{ display:block; font-size:13px; color:#444; margin:10px 0 6px; }
    input, textarea{
      width:100%; box-sizing:border-box; padding:10px; font-size:15px;
      border:1px solid #ccc; border-radius:10px; background:#fff;
    }
    textarea{ min-height:55px; }
    .row{ display:flex; gap:10px; }
    .col{ width:100%; }

    .btn2{
      width:100%; padding:12px; font-size:16px; border:1px solid #222;
      background:#fff; color:#222; border-radius:10px; margin-top:10px;
      touch-action: manipulation;
    }
    .btn2:active{ opacity:.85; }
    .btn2:disabled{ opacity:.55; }

    .hint{ font-size:12px; color:#666; margin-top:6px; }
    .reqBad{ border-color:#d11 !important; box-shadow:0 0 0 3px rgba(209,17,17,0.15); }

    .zoneCard{ background:#fff; border:1px solid #ddd; border-radius:12px; padding:10px; margin-top:10px; }
    .zoneHead{ display:flex; justify-content:space-between; gap:10px; align-items:flex-start; font-size:14px; font-weight:700; }
    .zoneSub{ margin-top:4px; font-size:12px; color:#444; font-weight:400; }

    .grid{ display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-top:10px; }
    .chk{
      display:flex; align-items:center; gap:10px;
      padding:10px; border:1px solid #eee; border-radius:12px;
      background:#fafafa; font-size:14px; user-select:none; touch-action: manipulation;
    }
    .chk input{ width:22px; height:22px; margin:0; }

    .miniBtn{
      border:1px solid #222; background:#fff; color:#222;
      border-radius:10px; padding:6px 10px; font-size:13px; min-width:88px;
      touch-action: manipulation;
    }
    .miniBtn:active{ opacity:.85; }

    .bar{
      display:flex; gap:10px; padding:10px 12px; border-top:1px solid #ddd;
      background:#fafafa; position:sticky; bottom:0; z-index:30;
    }
    .bar button{
      width:100%; padding:14px; font-size:16px; border:none; border-radius:10px;
      color:#fff; background:#0b6623; touch-action: manipulation;
    }
    .bar button:active{ opacity:.85; }
    .bar button:disabled{ opacity:.55; }

    .bar .tg{ background:#2a76d2; }

    .miniRow{
      display:flex;
      gap:10px;
      margin-top:10px;
    }
    .miniRow .btn2{ margin-top:0; }

    #toast{
      position:fixed; left:50%; bottom:16px; transform:translateX(-50%);
      background:rgba(0,0,0,0.85); color:#fff; padding:10px 12px; border-radius:12px;
      font-size:14px; max-width:92%; z-index:9999; display:none; white-space:pre-wrap;
    }
  </style>
</head>

<body>
  <div class="title">–ö–ê–†–¢–ê –†–ê–ù–ï–ù–ò–ô</div>
  <div id="topStatus" class="topStatus">JS: OK (–∫–∞—Ä—Ç–∞ –≥–æ—Ç–æ–≤–∞)</div>

  <div class="tabs">
    <button class="tab" id="btnFront" type="button">–ü–ï–†–ï–î</button>
    <button class="tab" id="btnBack" type="button">–°–ü–ò–ù–ê</button>
  </div>

  <div class="wrap">
    <img id="bodyImage" class="map" src="body_front.png" alt="body">
    <div id="pinsLayer"></div>
  </div>

  <div class="panel">
    <div class="row">
      <div class="col">
        <label>–î–∞—Ç–∞/–≤—Ä–µ–º—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
        <input id="dt" type="datetime-local"/>
      </div>
      <div class="col">
        <label>–ü–æ–∑—ã–≤–Ω–æ–π (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
        <input id="call" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: –ë–ê–†–°-12"/>
      </div>
    </div>

    <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
    <textarea id="comment" placeholder="–∫—Ä–∞—Ç–∫–æ..."></textarea>

    <div class="row" style="margin-top:10px;">
      <div class="col">
        <label>–í–≤–µ—Å—Ç–∏ –Ω–æ–º–µ—Ä –∑–æ–Ω—ã (–¥–ª—è —Ç–µ–∫—É—â–µ–π —Å—Ç–æ—Ä–æ–Ω—ã)</label>
        <input id="zoneNum" type="number" inputmode="numeric" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: 12"/>
        <div class="hint">–ù–∞–∂–º–∏ ‚Äú–î–æ–±–∞–≤–∏—Ç—å/—É–±—Ä–∞—Ç—å‚Äù ‚Äî —ç—Ç–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å.</div>
      </div>
      <div class="col" style="display:flex;align-items:flex-end;">
        <button class="btn2" id="btnAddZone" type="button" style="margin-top:0;">–î–û–ë–ê–í–ò–¢–¨/–£–ë–†–ê–¢–¨</button>
      </div>
    </div>

    <div class="hint" style="margin-top:10px;">
      –¢–µ–ø–µ—Ä—å –õ–ï–í–û/–ü–†–ê–í–û –µ—Å—Ç—å –¥–ª—è –≤—Å–µ—Ö –∑–æ–Ω, –∫—Ä–æ–º–µ:
      <b>–ü–æ–∑–≤–æ–Ω–æ—á–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏</b> –∏ <b>–ü—É–ø–æ—á–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏</b>.
      <br/>üéÅ –ù–æ–≤–∞—è —Ñ–∏—à–∫–∞: –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∑–æ–Ω—ã —Å—Ç–æ—Ä–æ–Ω–∞ —Å—Ç–∞–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ –ø–æ–ª–æ–∂–µ–Ω–∏—é –º–µ—Ç–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞) ‚Äî –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –∫–Ω–æ–ø–∫–∞–º–∏.
    </div>

    <div id="zonesUI"></div>

    <div class="miniRow">
      <button class="btn2" id="btnRefresh" type="button">–û–ë–ù–û–í–ò–¢–¨ –û–¢–ß–Å–¢</button>
      <button class="btn2" id="btnCopy" type="button">–ö–û–ü–ò–†–û–í–ê–¢–¨</button>
    </div>

    <button class="btn2" id="btnShort" type="button">–ö–û–†–û–¢–ö–ê–Ø –°–í–û–î–ö–ê (–¥–ª—è —Ä–∞—Ü–∏–∏)</button>

    <div class="out" id="finalMsg"></div>
  </div>

  <div class="bar">
    <button id="btnMakePDF" type="button">–°–î–ï–õ–ê–¢–¨ PDF (2 —Å—Ç—Ä–∞–Ω–∏—Ü—ã)</button>
    <button id="btnTG" class="tg" type="button">TELEGRAM</button>
    <button id="btnHelp" type="button" style="background:#444;">–ò–ù–°–¢–†–£–ö–¶–ò–Ø</button>
    <button type="button" style="background:#444;" onclick="location.href='./evac.html'">–≠–í–ê–ö–£–ê–¶–ò–Ø</button>
  </div>

  <div id="toast"></div>

  <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Å–∫–ª–∞–¥ –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç–æ–≤ -->
  <div style="text-align: center; margin-top: 20px;">
    <a href="med_inventory.html">
      <button style="padding: 12px 20px; font-size: 16px; background-color: #007bff; color: white; border: none; border-radius: 8px; cursor: pointer;">
        –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–∫–ª–∞–¥ –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç–æ–≤
      </button>
    </a>
  </div>

<script>
// –°–∫—Ä–∏–ø—Ç –∫–∞–∫ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Å–æ–æ–±—â–µ–Ω–∏–∏, –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
</script>

</body>
</html>
