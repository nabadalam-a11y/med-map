<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Эвакуация — быстрая оценка</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f5f5f5;
  color:#111;
}
.header{
  background:#1b5e20;
  color:#fff;
  padding:14px;
  text-align:center;
  font-size:18px;
  font-weight:700;
}
.wrap{ padding:12px; }

a{ text-decoration:none; }

.back-btn{
  display:inline-block;
  background:#fff;
  border:1px solid #999;
  border-radius:10px;
  padding:10px 14px;
  font-size:15px;
  margin-bottom:12px;
}

.card{
  background:#fff;
  border-radius:14px;
  padding:14px;
  margin-bottom:12px;
  box-shadow:0 2px 6px rgba(0,0,0,.08);
}

.item{
  display:flex;
  gap:12px;
  align-items:flex-start;
  padding:10px 0;
  border-bottom:1px solid #eee;
}
.item:last-child{ border-bottom:none; }

input[type=checkbox]{
  width:22px;
  height:22px;
}

.item-title{
  font-weight:700;
}
.item-sub{
  font-size:13px;
  color:#555;
}

.result{
  border-radius:14px;
  padding:14px;
  font-weight:700;
  margin-top:10px;
}

.green{ background:#e8f5e9; border:2px solid #2e7d32; }
.yellow{ background:#fffde7; border:2px solid #f9a825; }
.red{ background:#ffebee; border:2px solid #c62828; }

.actions{
  display:flex;
  gap:10px;
  margin-top:12px;
}
.actions button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  font-size:16px;
  color:#fff;
}
.copy{ background:#1565c0; }
.reset{ background:#555; }

pre{
  white-space:pre-wrap;
  font-size:13px;
  background:#fff;
  padding:12px;
  border-radius:12px;
  margin-top:10px;
}
</style>
</head>

<body>

<div class="header">ЭВАКУАЦИЯ — БЫСТРАЯ ОЦЕНКА</div>

<div class="wrap">

<a href="/med-map/">
  <div class="back-btn">← К карте ранений</div>
</a>

<div class="card">
  <label class="item">
    <input type="checkbox" data-critical data-text="Неконтролируемое или рецидивирующее кровотечение">
    <div>
      <div class="item-title">Тяжёлое кровотечение</div>
      <div class="item-sub">жгут / тампонада / риск срыва</div>
    </div>
  </label>

  <label class="item">
    <input type="checkbox" data-critical data-text="Ранение груди">
    <div>
      <div class="item-title">Ранение груди</div>
      <div class="item-sub">клапан закрыт, риск ухудшения</div>
    </div>
  </label>

  <label class="item">
    <input type="checkbox" data-critical data-text="Подозрение на проникающее ранение живота/таза">
    <div>
      <div class="item-title">Проникающее ранение живота / таза</div>
      <div class="item-sub">боль, напряжение, ухудшение</div>
    </div>
  </label>

  <label class="item">
    <input type="checkbox" data-text="Серьёзная травма конечности">
    <div>
      <div class="item-title">Серьёзная травма конечности</div>
      <div class="item-sub">перелом, деформация, сильная боль</div>
    </div>
  </label>

  <label class="item">
    <input type="checkbox" data-text="Проникающая травма глаза">
    <div>
      <div class="item-title">Проникающая травма глаза</div>
    </div>
  </label>

  <label class="item">
    <input type="checkbox" data-text="Ожоги 10–20%">
    <div>
      <div class="item-title">Ожоги 10–20% поверхности</div>
    </div>
  </label>

  <label class="item">
    <input type="checkbox" data-text="Амбулаторные красные флаги">
    <div>
      <div class="item-title">Амбулаторные «красные флаги»</div>
      <div class="item-sub">температура + ухудшение</div>
    </div>
  </label>

  <label class="item">
    <input type="checkbox" data-text="Нуждается в поддержке и наблюдении">
    <div>
      <div class="item-title">Нужна поддержка / наблюдение</div>
      <div class="item-sub">не может идти сам</div>
    </div>
  </label>

  <label class="item">
    <input type="checkbox" data-stable>
    <div>
      <div class="item-title">Стабильно, поверхностно</div>
      <div class="item-sub">без прогрессии</div>
    </div>
  </label>
</div>

<div id="result" class="result green">
  Пока не оценено
</div>

<pre id="export"></pre>

<div class="actions">
  <button class="copy" onclick="copyResult()">КОПИРОВАТЬ</button>
  <button class="reset" onclick="resetAll()">СБРОСИТЬ</button>
</div>

</div>

<script>
function recalc(){
  const checks=[...document.querySelectorAll("input[type=checkbox]")];
  const critical=checks.some(c=>c.checked && c.dataset.critical!==undefined);
  const stable=checks.some(c=>c.checked && c.dataset.stable!==undefined);
  const marked=checks.filter(c=>c.checked && !c.dataset.stable);

  let res=document.getElementById("result");
  let exp=document.getElementById("export");

  let text="";

  if(critical){
    res.className="result red";
    res.textContent="ЭВАКУАЦИЯ СРОЧНО";
    text="Категория: СРОЧНО\nПричины:\n";
  }else if(marked.length>0){
    res.className="result yellow";
    res.textContent="ЭВАКУАЦИЯ ПЛАНОВАЯ";
    text="Категория: ПЛАНОВАЯ\nПричины:\n";
  }else if(stable){
    res.className="result green";
    res.textContent="НАБЛЮДАТЬ НА МЕСТЕ";
    text="Категория: НАБЛЮДАТЬ\nПричины:\nСтабильное состояние\n";
  }else{
    res.className="result green";
    res.textContent="Пока не оценено";
    exp.textContent="";
    return;
  }

  marked.forEach(c=>{
    if(c.dataset.text) text+="- "+c.dataset.text+"\n";
  });

  if(critical){
    text+="\nРекомендации:\n- Немедленная эвакуация\n- Подготовка к ухудшению\n";
  }else if(marked.length){
    text+="\nРекомендации:\n- Контроль состояния\n- Эвакуация при возможности\n";
  }else{
    text+="\nРекомендации:\n- Наблюдение\n- Симптоматическое лечение\n";
  }

  exp.textContent=text;
}

document.querySelectorAll("input").forEach(i=>{
  i.addEventListener("change", recalc);
});

function copyResult(){
  if(!export.textContent) return;
  navigator.clipboard.writeText(export.textContent);
}

function resetAll(){
  document.querySelectorAll("input").forEach(i=>i.checked=false);
  document.getElementById("result").textContent="Пока не оценено";
  document.getElementById("export").textContent="";
}
</script>

</body>
</html>
